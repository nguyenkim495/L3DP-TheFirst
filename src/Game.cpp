#include "Game.h"
#include "State\StateMgr.h"
#include "State\LoadingState.h"

Game* Game::m_Instance = 0;
////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
Game::Game()
{
	m_Init = false;
	
	m_stateMgr = nullptr;

	m_Instance = this;
}
////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
Game::~Game()
{

}
//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//I have no idea here, get driver information from App
void Game::Init(irr::IrrlichtDevice* device)
{
	m_device = device;
	m_stateMgr = new StateMgr();
	m_Init = true;
}
//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
void Game::Render()
{
	//printf("kidbuu");
}

//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
void Game::Update(float dt)
{
	if(this->m_stateMgr != nullptr)
		this->m_stateMgr->Update(dt);

	
	//test
	this->m_stateMgr->Switch(new LoadingState());
}

//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
bool Game::OnKeyEvent(irr::EKEY_CODE keyCode)
{
	//??? how to control chracter?
	return false;//??
}

//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
bool Game::OnMouseEvent(irr::EMOUSE_INPUT_EVENT mouseEvent)
{
	//???
	return false;//???
}
//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
Game* Game::Instance()
{
	return m_Instance;
}
//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
irr::IrrlichtDevice* Game::GetIrrDevice()
{
	return m_Instance->m_device;
}
//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
irr::video::IVideoDriver* Game::GetIVideoDriver()
{
	return m_Instance->m_device->getVideoDriver();
}
//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
StateMgr* Game::GetStateMgr()
{
	return m_Instance->m_stateMgr;
}
//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

